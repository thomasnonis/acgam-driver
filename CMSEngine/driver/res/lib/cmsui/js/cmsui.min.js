+function(t){"use strict";function e(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function i(t){var e,i=new Array;return i[0]=t>>>24>>>0,i[1]=t<<8>>>24>>>0,i[2]=t<<16>>>24,i[3]=t<<24>>>24,e=String(i[0])+"."+String(i[1])+"."+String(i[2])+"."+String(i[3])}function n(t,e,i,n){var s=-1,o=parseInt(i/e),a=i%e;switch(n){case 0:a<e-1&&(s=i+1);break;case 1:o>0&&(s=i-e);break;case 2:a>0&&(s=i-1);break;case 3:o<t-1&&(s=i+e)}return s}function s(e,i){if("undefined"==typeof e)return o.dtdID=o.dtd=t.Deferred(),o.dtdID;if("object"==typeof e&&"undefined"==typeof i)return e.resolve(),o.dtdID;if("function"==typeof i&&e===o.dtdID){var n=t.Deferred();return o.dtd.done(function(){i(n)}),o.dtd=n,o.dtd}}var o={dtdID:null,dtd:null};t.utilities={guid:e,ntoip:i,nearcell:n,waterfall:s}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.tooltip"),o="object"==typeof e&&e,a=o&&o.selector;(s||"destroy"!=e)&&(a?(s||n.data("cmsui.tooltip",s={}),s[a]||(s[a]=new i(this,o))):s||n.data("cmsui.tooltip",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="1.0.0",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),o=s.length;o--;){var a=s[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("cmsui."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("cmsui."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("cmsui."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("cmsui."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.cmsui."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var s=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(r);c&&(r=r.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(r).data("cmsui."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var h=this.getPosition(),d=o[0].offsetWidth,u=o[0].offsetHeight;if(c){var p=r,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);r="bottom"==r&&h.bottom+u>m.bottom?"top":"top"==r&&h.top-u<m.top?"bottom":"right"==r&&h.right+d>m.width?"left":"left"==r&&h.left-d<m.left?"right":r,o.removeClass(p).addClass(r)}var g=this.getCalculatedOffset(r,h,d,u);this.applyPlacement(g,r);var v=function(){var t=s.hoverState;s.$element.trigger("shown.cmsui."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?o.one("cmsuiTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var d=/top|bottom/.test(i),u=d?2*h.left-s+l:2*h.top-o+c,p=d?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][p],d)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=s.hoverState&&o.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.cmsui."+s.type),e&&e()}var s=this,o=this.tip(),a=t.Event("hide.cmsui."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("cmsuiTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var o=n?{top:0,left:0}:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,a,r,o)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-o-a.scroll,l=e.top+o-a.scroll+n;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var c=e.left-o,h=e.left+o+i;c<a.left?s.left=a.left-c:h>a.width&&(s.left=a.left+a.width-h)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("cmsui."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("cmsui."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("cmsui."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(t){if(t=t.toLowerCase(),p.test(t)){if(4===t.length){for(var e="#",i=1;i<4;i+=1)e+=t.slice(i,i+1).concat(t.slice(i,i+1));t=e}return parseInt("0x"+t.slice(1,3))}return f.test(t)?parseInt("0x"+t.slice(2,4)):null}function i(t){if(t=t.toLowerCase(),p.test(t)){if(4===t.length){for(var e="#",i=1;i<4;i+=1)e+=t.slice(i,i+1).concat(t.slice(i,i+1));t=e}return parseInt("0x"+t.slice(3,5))}return f.test(t)?parseInt("0x"+t.slice(4,6)):null}function n(t){if(t=t.toLowerCase(),p.test(t)){if(4===t.length){for(var e="#",i=1;i<4;i+=1)e+=t.slice(i,i+1).concat(t.slice(i,i+1));t=e}return parseInt("0x"+t.slice(5,7))}return f.test(t)?parseInt("0x"+t.slice(6,8)):null}function s(t){if(t=t.toLowerCase(),p.test(t))return t;if(f.test(t)){var e="#";return e+=t.slice(2,8),t=e}return null}function o(t){if(t=t.toLowerCase(),f.test(t))return t;if(p.test(t)){if(4===t.length){for(var e="#",i=1;i<4;i+=1)e+=t.slice(i,i+1).concat(t.slice(i,i+1));t=e}var e="0x";return e+=t.slice(1,7),t=e}return null}function a(t){if("object"==typeof t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b)return t;var s=e(t),o=i(t),a=n(t);return null!==s||null!==o||null!==a?{r:s,g:o,b:a}:null}function r(e){if("object"==typeof e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}return null}function l(t){var e=a(t);if(e){var i={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),s=Math.max(e.r,e.g,e.b),o=s-n;return i.b=s,i.s=0!==s?255*o/s:0,0!==i.s?e.r===s?i.h=(e.g-e.b)/o:e.g===s?i.h=2+(e.b-e.r)/o:i.h=4+(e.r-e.g)/o:i.h=-1,i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i}return null}function c(t){if("object"==typeof t&&"number"==typeof t.h&&"number"==typeof t.s&&"number"==typeof t.b){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),s=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=s;else{var o=s,a=(255-n)*s/255,r=(o-a)*(i%60)/60;360===i&&(i=0),i<60?(e.r=o,e.b=a,e.g=a+r):i<120?(e.g=o,e.b=a,e.r=o-r):i<180?(e.g=o,e.r=a,e.b=a+r):i<240?(e.b=o,e.r=a,e.g=o-r):i<300?(e.b=o,e.g=a,e.r=a+r):i<360?(e.r=o,e.g=a,e.b=o-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}return null}function h(t){var e=a(t);if(e){var i={h:0,s:0,l:0},n=Math.min(e.r,e.g,e.b),s=Math.max(e.r,e.g,e.b),o=s-n;return i.l=(s+n)/2,i.s=0!==s?255*o/s:0,0!==i.s?e.r===s?i.h=(e.g-e.b)/o:e.g===s?i.h=2+(e.b-e.r)/o:i.h=4+(e.r-e.g)/o:i.h=-1,i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.l*=100/255,i}return null}function d(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function u(t){if("object"==typeof t&&"number"==typeof t.h&&"number"==typeof t.s&&"number"==typeof t.l){var e,i,n,s=t.h/360,o=t.s/100,a=t.l/100;if(0==o)e=i=n=a;else{var r=a<.5?a*(1+o):a+o-a*o,l=2*a-r;e=d(l,r,s+1/3),i=d(l,r,s),n=d(l,r,s-1/3)}return e=Math.round(255*e),i=Math.round(255*i),n=Math.round(255*n),{r:e,g:i,b:n}}return null}var p=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,f=/^0x([0-9a-fA-F]{6})$/;t.colors={colorR:e,colorG:i,colorB:n,toJS:s,to16:o,toRGB:a,fromRGB:r,toHSB:l,fromHSB:c,toHSL:h,fromHSL:u}}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),o=s.data("cmsui.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data("cmsui.modal",o=new i(this,a)),"string"==typeof e?o[e](n):a.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.cmsui.modal")},this))};i.VERSION="3.3.0",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.cmsui.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.cmsui.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),s&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=t.Event("shown.cmsui.modal",{relatedTarget:e});s?n.$element.find(".modal-dialog").one("cmsuiTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.cmsui.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.cmsui.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.cmsui.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("cmsuiTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.cmsui.modal").on("focusin.cmsui.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.cmsui.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.cmsui.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetScrollbar(),t.$element.trigger("hidden.cmsui.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.cmsui.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("cmsuiTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("cmsuiTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.checkScrollbar=function(){this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){if(document.body.clientWidth>=window.innerWidth)return 0;var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.cmsui.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),o=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("cmsui.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.cmsui.modal",function(t){t.isDefaultPrevented()||o.one("hidden.cmsui.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,a,this)})}(jQuery),+function($){"use strict";function normaliseLanguageCode(t){return(!t||t.length<2)&&(t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||"en"),t=t.toLowerCase(),t=t.replace(/-/,"_"),t.length>3&&(t=t.substring(0,3)+t.substring(3).toUpperCase()),t}function callbackIfComplete(t){t.async&&(t.filesLoaded+=1,t.filesLoaded===t.totalFiles&&t.callback&&t.callback())}function loadAndParseFiles(t,e,i){null!=e&&e.length>0&&loadAndParseFile(t,e[0],i,function(){e.shift(),loadAndParseFiles(t,e,i)})}function loadAndParseFile(t,e,i,n){null!=e&&$.ajax({url:e,async:i.async,cache:i.cache,dataType:"text",success:function(e,s){parseData(t,e,i.mode),n(),callbackIfComplete(i)},error:function(t,n,s){console.log("Failed to download or parse "+e),callbackIfComplete(i)}})}function parseData(multilang,data,mode){for(var parsed="",parameters=data.split(/\n/),regPlaceHolder=/(\{\d+})/g,regRepPlaceHolder=/\{(\d+)}/g,unicodeRE=/(\\u.{4})/gi,i=0;i<parameters.length;i++)if(parameters[i]=parameters[i].replace(/^\s\s*/,"").replace(/\s\s*$/,""),parameters[i].length>0&&"#"!=parameters[i].match("^#")){var pair=parameters[i].split("=");if(pair.length>0){for(var name=decodeURI(pair[0]).replace(/^\s\s*/,"").replace(/\s\s*$/,""),value=1==pair.length?"":pair[1];"\\"==value.match(/\\$/);)value=value.substring(0,value.length-1),value+=parameters[++i].replace(/\s\s*$/,"");for(var s=2;s<pair.length;s++)value+="="+pair[s];if(value=value.replace(/^\s\s*/,"").replace(/\s\s*$/,""),"map"==mode||"both"==mode){var unicodeMatches=value.match(unicodeRE);if(unicodeMatches)for(var u=0;u<unicodeMatches.length;u++)value=value.replace(unicodeMatches[u],unescapeUnicode(unicodeMatches[u]));multilang.map[name]=value}if("vars"==mode||"both"==mode)if(value=value.replace(/"/g,'\\"'),checkKeyNamespace(name),regPlaceHolder.test(value)){for(var parts=value.split(regPlaceHolder),first=!0,fnArgs="",usedArgs=[],p=0;p<parts.length;p++)!regPlaceHolder.test(parts[p])||0!=usedArgs.length&&usedArgs.indexOf(parts[p])!=-1||(first||(fnArgs+=","),fnArgs+=parts[p].replace(regRepPlaceHolder,"v$1"),usedArgs.push(parts[p]),first=!1);parsed+="var "+name+"= function("+fnArgs+") {";var fnExpr='"'+value.replace(regRepPlaceHolder,'"+v$1+"')+'"';parsed+="return "+fnExpr+";};"}else parsed+="var "+name+'="'+value+'";'}}eval(parsed)}function checkKeyNamespace(key){var regDot=/\./;if(regDot.test(key))for(var fullname="",names=key.split(/\./),i=0;i<names.length;i++)i>0&&(fullname+="."),fullname+=names[i],eval("typeof "+fullname+' == "undefined"')&&eval(fullname+"={};")}function getFiles(t){return t&&t.constructor==Array?t:[t]}function unescapeUnicode(t){var e=[],i=parseInt(t.substr(2),16);i>=0&&i<Math.pow(2,16)&&e.push(i);for(var n="",s=0;s<e.length;++s)n+=String.fromCharCode(e[s]);return n}function Plugin(t){var e=$.extend({},MultiLang.DEFAULTS,"object"==typeof t&&t),i="cmsui.multilang";"object"==typeof t&&t.name&&(i+="."+t.name);var n=$("body").data(i);if(n||($("body").data(i,n=new MultiLang(e)),e.checkAvailableLanguages?$.ajax({url:e.path+"languages.json",async:e.async,cache:!1,success:function(t,e,i){n.languagesFileLoadedCallback(t.languages||[])}}):n.languagesFileLoadedCallback([])),arguments.length>=1){for(var s=[],o=0;o<arguments.length;o++)0==o&&"object"==typeof arguments[0]||(s[s.length]=arguments[o]);if(s.length>=1)return n.prop.apply(n,s)}}var MultiLang=function(t){this.options=t,this.map={},t.language=normaliseLanguageCode(t.language)};MultiLang.VERSION="1.0.0",MultiLang.DEFAULTS={name:"cmsui",language:"",path:"",mode:"vars",cache:!1,encoding:"UTF-8",async:!1,checkAvailableLanguages:!1,callback:null},MultiLang.prototype.languagesFileLoadedCallback=function(t){this.options.totalFiles=0,this.options.filesLoaded=0;var e=getFiles(this.options.name);if(this.options.async)for(var i=0,n=e.length;i<n;i++){this.options.totalFiles+=1;var s=this.options.language.substring(0,2);if(0!=t.length&&$.inArray(s,t)==-1||(this.options.totalFiles+=1),this.options.language.length>=5){var o=this.options.language.substring(0,5);0!=t.length&&$.inArray(o,t)==-1||(this.options.totalFiles+=1)}}for(var a,r,l,c=0,h=e.length;c<h;c++){a=this.options.path+e[c]+".cmsl";var s=this.options.language.substring(0,2);if(0!=t.length&&$.inArray(s,t)==-1||(r=this.options.path+e[c]+"_"+s+".cmsl"),this.options.language.length>=5){var o=this.options.language.substring(0,5);0!=t.length&&$.inArray(o,t)==-1||(l=this.options.path+e[c]+"_"+o+".cmsl")}loadAndParseFiles(this,[a,r,l],this.options),a=r=l=null}this.options.callback&&!this.options.async&&this.options.callback()},MultiLang.prototype.prop=function(t){var e=this.map[t];if(null==e)return"["+t+"]";var i;2==arguments.length&&$.isArray(arguments[1])&&(i=arguments[1]);var n;if("string"==typeof e){for(n=0;(n=e.indexOf("\\",n))!=-1;)e="t"==e.charAt(n+1)?e.substring(0,n)+"\t"+e.substring(n++ +2):"r"==e.charAt(n+1)?e.substring(0,n)+"\r"+e.substring(n++ +2):"n"==e.charAt(n+1)?e.substring(0,n)+"\n"+e.substring(n++ +2):"f"==e.charAt(n+1)?e.substring(0,n)+"\f"+e.substring(n++ +2):"\\"==e.charAt(n+1)?e.substring(0,n)+"\\"+e.substring(n++ +2):e.substring(0,n)+e.substring(n+1);var s,o,a=[];for(n=0;n<e.length;)if("'"==e.charAt(n))if(n==e.length-1)e=e.substring(0,n);else if("'"==e.charAt(n+1))e=e.substring(0,n)+e.substring(++n);else{for(s=n+2;(s=e.indexOf("'",s))!=-1;){if(s==e.length-1||"'"!=e.charAt(s+1)){e=e.substring(0,n)+e.substring(n+1,s)+e.substring(s+1),n=s-1;break}e=e.substring(0,s)+e.substring(++s)}s==-1&&(e=e.substring(0,n)+e.substring(n+1))}else if("{"==e.charAt(n))if(s=e.indexOf("}",n+1),s==-1)n++;else if(o=parseInt(e.substring(n+1,s)),!isNaN(o)&&o>=0){var r=e.substring(0,n);""!=r&&a.push(r),a.push(o),n=0,e=e.substring(s+1)}else n=s+1;else n++;""!=e&&a.push(e),e=a,this.map[t]=a}if(0==e.length)return"";if(1==e.length&&"string"==typeof e[0])return e[0];var l="";for(n=0;n<e.length;n++)l+="string"==typeof e[n]?e[n]:i&&e[n]<i.length?i[e[n]]:!i&&e[n]+1<arguments.length?arguments[e[n]+1]:"{"+e[n]+"}";return l},$.multilang=Plugin;var cbSplit;cbSplit||(cbSplit=function(t,e,i){if("[object RegExp]"!==Object.prototype.toString.call(e))return"undefined"==typeof cbSplit._nativeSplit?t.split(e,i):cbSplit._nativeSplit.call(t,e,i);var n,s,o,a,r=[],l=0,c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":""),e=new RegExp(e.source,c+"g");if(t+="",cbSplit._compliantExecNpcg||(n=new RegExp("^"+e.source+"$(?!\\s)",c)),void 0===i||+i<0)i=1/0;else if(i=Math.floor(+i),!i)return[];for(;(s=e.exec(t))&&(o=s.index+s[0].length,!(o>l&&(r.push(t.slice(l,s.index)),!cbSplit._compliantExecNpcg&&s.length>1&&s[0].replace(n,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(s[t]=void 0)}),s.length>1&&s.index<t.length&&Array.prototype.push.apply(r,s.slice(1)),a=s[0].length,l=o,r.length>=i)));)e.lastIndex===s.index&&e.lastIndex++;return l===t.length?!a&&e.test("")||r.push(""):r.push(t.slice(l)),r.length>i?r.slice(0,i):r},cbSplit._compliantExecNpcg=void 0===/()??/.exec("")[1],cbSplit._nativeSplit=String.prototype.split),String.prototype.split=function(t,e){return cbSplit(this,t,e)}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.popover"),o="object"==typeof e&&e,a=o&&o.selector;(s||"destroy"!=e)&&(a?(s||n.data("cmsui.popover",s={}),s[a]||(s[a]=new i(this,o))):s||n.data("cmsui.popover",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="1.0.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(e){var n=arguments;return this.each(function(){var s=t(this),o=s.data("cmsui.range"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);if(o||s.data("cmsui.range",o=new i(this,a)),"string"==typeof e)switch(e){case"setValue":2==n.length&&o.setValue(n[1]),3==n.length&&o.setValue(n[1]+","+n[2])}"object"==typeof e&&(o.options=a,o.option())})}var i=function(e,i){this.$element=t(e),this.$backbar=null,this.$selectedbar=null,this.$lowpointer=null,this.$highpointer=null,this.$lowpointerlabel=null,this.$highpointerlabel=null,this.options=i,this.value=0,this.interval=0,this.$element.width(this.options.width),this.$element.append('      <div class="range-backbar">        <div class="range-selectedbar"></div>        <div class="range-lowpointer"></div><div class="range-lowpointer-label"></div>        <div class="range-highpointer"></div><div class="range-highpointer-label"></div>        <div class="range-clickable-dummy"></div>      </div>      <div class="range-scale"></div>    '),this.$backbar=this.$element.find(".range-backbar"),this.$selectedbar=this.$element.find(".range-selectedbar"),this.$lowpointer=this.$element.find(".range-lowpointer"),this.$highpointer=this.$element.find(".range-highpointer"),this.$lowpointerlabel=this.$element.find(".range-lowpointer-label"),this.$highpointerlabel=this.$element.find(".range-highpointer-label")};i.VERSION="1.0.0",i.DEFAULTS={width:300,isRange:!1,showLabels:!0,showScale:!0,disable:!1,snap:!1,from:0,to:0,step:1,format:"%s"},i.prototype.option=function(){this.value=this.options.value||(this.options.isRange?this.options.from+","+this.options.from:""+this.options.from),this.interval=this.options.to-this.options.from,this.isSingle()?(this.$lowpointer.hide(),this.$lowpointerlabel.hide()):(this.$lowpointer.show(),this.$lowpointerlabel.show()),this.options.showLabels?(this.$lowpointerlabel.show(),this.$highpointerlabel.show()):(this.$lowpointerlabel.hide(),this.$highpointerlabel.hide()),this.options.showScale&&this.renderScale(),this.$backbar.click(t.proxy(this.clickBackBar,this)),this.$lowpointer.on("mousedown touchstart",t.proxy(this.onDragStart,this)),this.$lowpointer.bind("dragstart",function(t){t.preventDefault()}),this.$highpointer.on("mousedown touchstart",t.proxy(this.onDragStart,this)),this.$highpointer.bind("dragstart",function(t){t.preventDefault()}),this.setValue(this.value)},i.prototype.isSingle=function(){return"number"==typeof this.value||this.value.indexOf(",")===-1&&!this.options.isRange},i.prototype.valuesToPrc=function(t){var e=100*(parseFloat(t[0])-parseFloat(this.options.from))/this.interval,i=100*(parseFloat(t[1])-parseFloat(this.options.from))/this.interval;return[e,i]},i.prototype.prcToPx=function(t){return this.$element.width()*t/100},i.prototype.isDecimal=function(){return(this.value+this.options.from+this.options.to).toString().indexOf(".")!==-1},i.prototype.isReadonly=function(){this.$element.toggleClass("range-readonly",this.options.disable)},i.prototype.renderScale=function(){for(var e=this.options.scale||[this.options.from,this.options.to],i=Math.round(100/(e.length-1)*10)/10,n="",s=0;s<e.length;s++)n+='<span style="left: '+s*i+'%">'+("|"!=e[s]?"<ins>"+e[s]+"</ins>":"")+"</span>";this.$element.find(".range-scale").html(n),this.$element.find("ins").each(function(){t(this).css({marginLeft:-t(this).outerWidth()/2})})},i.prototype.clickBackBar=function(t){if(!this.options.disable){var e=t.pageX-this.$backbar.offset().left;this.isSingle()&&this.setPosition(this.$highpointer,e,!0,!0)}},i.prototype.setPosition=function(t,e,i,n){var s,o,a=parseFloat(this.$lowpointer.css("left"))||0,r=parseFloat(this.$highpointer.css("left"))||0,l=this.$highpointer.width()/2;if(i||(e=this.prcToPx(e)),this.options.snap){var c=this.correctPositionForSnap(e);if(c===-1)return;e=c}t===this.$highpointer?r=Math.round(e-l):a=Math.round(e-l),t[n?"animate":"css"]({left:Math.round(e-l)}),this.isSingle()?s=0:(s=a+l,o=r+l);var h=Math.round(r+l-s);this.$selectedbar[n?"animate":"css"]({width:Math.abs(h),left:h>0?s:s+h}),this.showPointerValue(t,e,n),this.isReadonly()},i.prototype.correctPositionForSnap=function(t){var e=this.positionToValue(t)-this.options.from,i=this.options.width/(this.interval/this.options.step),n=e/this.options.step*i;return t<=n+i/2&&t>=n-i/2?n:-1},i.prototype.positionToValue=function(t){var e=t/this.$element.width()*this.interval;if(e=parseFloat(e,10)+parseFloat(this.options.from,10),this.isDecimal()){var i=Math.round(Math.round(e/this.options.step)*this.options.step*100)/100;if(0!==i)for(i=""+i,i.indexOf(".")===-1&&(i+=".");i.length-i.indexOf(".")<3;)i+="0";else i="0.00";return i}return Math.round(e/this.options.step)*this.options.step},i.prototype.showPointerValue=function(e,i,n){var s,o,a,r=this.positionToValue(i);e===this.$lowpointerlabel?(s="low",o=this.$lowpointerlabel):(s="high",o=this.$highpointerlabel),a=t.isFunction(this.options.format)?this.options.format(r,s):this.options.format.replace("%s",r);var l=o.html(a).width(),c=i-l/2;c=Math.min(Math.max(c,0),this.options.width-l),o[n?"animate":"css"]({left:c}),this.setInputValue(e,r)},i.prototype.setInputValue=function(t,e){var i;if(this.isSingle())i=e.toString();else{var n=this.value.split(",");i=t===this.$lowpointer?e+","+n[1]:n[0]+","+e}i!==this.value&&(this.value=i,this.options.onChange&&this.options.onChange(this.value))},i.prototype.onDragStart=function(e){if(!(this.options.disable||"mousedown"===e.type&&1!==e.which)){e.stopPropagation(),e.preventDefault();var i=t(e.target);this.$element.find(".last-active").removeClass("last-active"),i.addClass("focused last-active"),i===this.$lowpointer?this.$lowpointerlabel.addClass("focused"):this.$highpointerlabel.addClass("focused"),t(document).on("mousemove.cmsui.range touchmove.cmsui.range",t.proxy(this.onDrag,this,i)),t(document).on("mouseup.cmsui.range touchend.cmsui.range touchcancel.cmsui.range",t.proxy(this.onDragEnd,this))}},i.prototype.onDrag=function(t,e){e.stopPropagation(),e.preventDefault(),e.originalEvent.touches&&e.originalEvent.touches.length?e=e.originalEvent.touches[0]:e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length&&(e=e.originalEvent.changedTouches[0]);
var i=e.clientX-this.$element.offset().left;this.change(t,i)},i.prototype.onDragEnd=function(e){this.$element.find(".focused").removeClass("focused"),t(document).off(".cmsui.range")},i.prototype.change=function(t,e){var i,n;i=0,n=this.$element.width(),this.isSingle()||(t===this.$lowPointer?n=parseFloat(this.$highpointer.css("left"))+this.$highpointer.width()/2:i=parseFloat(this.$lowpointer.css("left"))+this.$lowpointer.width()/2);var s=Math.min(Math.max(e,i),n);this.setPosition(t,s,!0)},i.prototype.setValue=function(t){var e=t.toString().split(",");e[0]=Math.min(Math.max(e[0],this.options.from),this.options.to)+"",e.length>1&&(e[1]=Math.min(Math.max(e[1],this.options.from),this.options.to)+""),this.value=t;var i=this.valuesToPrc(2===e.length?e:[0,e[0]]);this.isSingle()?this.setPosition(this.$highpointer,i[1]):(this.setPosition(this.$lowpointer,i[0]),this.setPosition(this.$highpointer,i[1]))};var n=t.fn.range;t.fn.range=e,t.fn.range.Constructor=i,t.fn.range.noConflict=function(){return t.fn.range=n,this},t(window).on("load",function(){t(".range").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.header"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("cmsui.header",s=new i(this,o)),"object"==typeof e&&(e.hasOwnProperty("onMinimizeClick")&&(s.onMinimizeClick=e.onMinimizeClick,s.$element.find(".header-controls-minimize").length<1&&(s.$element.find(".header-controls").append("<a title='Minimize' class='header-controls-minimize'>              <svg x='0px' y='0px' viewBox='0 0 10.2 1' class='header-controls-icon'>                <rect fill='#ffffff' width='10.2' height='1'/>              </svg>            </a>"),s.$element.find(".header-controls-minimize").on("click.cmsui.header.controls.minimize",t.proxy(s.clickMinimize,s)))),e.hasOwnProperty("onCloseClick")&&(s.onCloseClick=e.onCloseClick,s.$element.find(".header-controls-close").length<1&&(s.$element.find(".header-controls").append("<a title='Close' class='header-controls-close'>              <svg x='0px' y='0px' viewBox='0 0 10.2 10.2' class='header-controls-icon'>                <polygon                  fill='#ffffff'                  points='10.2,0.7 9.5,0 5.1,4.4 0.7,0 0,0.7 4.4,5.1 0,9.5 0.7,10.2 5.1,5.8 9.5,10.2 10.2,9.5 5.8,5.1 '                />              </svg>            </a>"),s.$element.find(".header-controls-close").on("click.cmsui.header.controls.close",t.proxy(s.clickClose,s)))))})}var i=function(e,i){this.$element=t(e),this.options=i,this.onCloseClick=null,this.onMinimizeClick=null,i.controls&&this.$element.find(".header-controls").length<1&&this.$element.append("<div class='header-controls'></div>")};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.clickClose=function(t){this.onCloseClick&&this.onCloseClick()},i.prototype.clickMinimize=function(t){this.onMinimizeClick&&this.onMinimizeClick()};var n=t.fn.header;t.fn.header=e,t.fn.header.Constructor=i,t.fn.header.noConflict=function(){return t.fn.header=n,this},t(window).on("load",function(){t(".header").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.profilelist"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.profilelist",s=new i(this,o)),"object"==typeof e&&(e.hasOwnProperty("icons")&&(s.icons=e.icons),e.hasOwnProperty("maxNum")&&(s.maxNum=e.maxNum),e.hasOwnProperty("onSelect")&&(s.onSelect=e.onSelect),e.hasOwnProperty("onDblClick")&&(s.onDblClick=e.onDblClick),e.hasOwnProperty("onBindApp")&&(s.onBindApp=e.onBindApp),e.hasOwnProperty("onBindAppIn")&&(s.onBindAppIn=e.onBindAppIn),e.hasOwnProperty("onBindAppOut")&&(s.onBindAppOut=e.onBindAppOut),e.hasOwnProperty("onImport")&&(s.onImport=e.onImport),e.hasOwnProperty("onExport")&&(s.onExport=e.onExport),e.hasOwnProperty("onDelete")&&(s.onDelete=e.onDelete),e.hasOwnProperty("onAdd")&&(s.onAdd=e.onAdd),e.hasOwnProperty("items")&&(s.items&&s.$element.empty(),s.items=e.items,s.index=null,t.each(s.items,function(e,i){var n='<div class="profile" data-index="'+e+'">';n+='<div class="ximagebutton" data-func="select">',n+=i.icons&&i.icons.select?'<input class="ximagebutton-image" type="image" draggable="false" src="'+i.icons.select+'"></input>':'<input class="ximagebutton-image" type="image" draggable="false" src="'+this.icons.select+'"></input>',i.hasOwnProperty("name")&&null!==i.name&&(n+='<div class="ximagebutton-label-float"><label class="ximagebutton-label">'+i.name+"</label></div>"),n+="</div>",(this.onBindApp||this.onImport||this.onExport||this.onDelete)&&(n+='<input class="imagebutton profile-item" data-func="bindapp" type="image" draggable="false" src="'+this.icons.bindapp+'"></input>              <input class="imagebutton profile-item" data-func="import" type="image" draggable="false" src="'+this.icons.import+'"></input>              <input class="imagebutton profile-item" data-func="export" type="image" draggable="false" src="'+this.icons.export+'"></input>              <input class="imagebutton profile-item" data-func="delete" type="image" draggable="false" src="'+this.icons.delete+'"></input>',n+='<div class="bind-function">                <div class="bind-function-content">                <span class="text"></span>                <span class="remove"></span>                </div>                </div>'),n+="</div>",this.$element.append(n);var s=this.$element.find(".profile[data-index="+e+"]");s.find('[data-func="select"]').ximagebutton({onClick:t.proxy(this.select,s),onDblClick:t.proxy(this.rename,s)}),null===this.index&&i.active?(this.index=e,s.find('[data-func="select"]').ximagebutton("active"),this.onBindApp?s.find('[data-func="bindapp"]').imagebutton({onClick:t.proxy(this.bindapp,this)}):s.find('[data-func="bindapp"]').imagebutton({onClick:null}),this.onBindAppIn||this.onBindAppOut?s.find('[data-func="bindapp"]').imagebutton({onMouseEnter:t.proxy(this.bindappin,this),onMouseLeave:t.proxy(this.bindappout,this)}):s.find('[data-func="bindapp"]').imagebutton({onMouseEnter:null,onMouseLeave:null}),this.onImport?s.find('[data-func="import"]').imagebutton({onClick:t.proxy(this.import,this)}):s.find('[data-func="import"]').imagebutton({onClick:null}),this.onExport?s.find('[data-func="export"]').imagebutton({onClick:t.proxy(this.export,this)}):s.find('[data-func="export"]').imagebutton({onClick:null}),this.onDelete?s.find('[data-func="delete"]').imagebutton({onClick:t.proxy(this.delete,this)}):s.find('[data-func="delete"]').imagebutton({onClick:null})):(s.find('[data-func="bindapp"]').imagebutton({onClick:null}),s.find('[data-func="import"]').imagebutton({onClick:null}),s.find('[data-func="export"]').imagebutton({onClick:null}),s.find('[data-func="delete"]').imagebutton({onClick:null}))}.bind(s)),s.maxNum&&s.items.length<s.maxNum))){var a='<div class="profile">            <div>            <input class="imagebutton" type="image" data-func="add" draggable="false" src="res/img/profile_add_1.png"></input>            </div>            </div>';s.$element.append(a),s.$element.find('[data-func="add"]').imagebutton({onClick:t.proxy(s.add,s)})}})}var i=function(e,i){this.$element=t(e),this.options=i,this.icons=null,this.maxNum=null,this.items=null,this.index=null,this.onSelect=null,this.onDblClick=null,this.onBindApp=null,this.onImport=null,this.onExport=null,this.onDelete=null,this.onAdd=null};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.select=function(e){var i=this.data("index");if(null!==i&&this.parent().hasClass("profilelist")){var n=this.parent().data("cmsui.profilelist");if(i!=n.index&&i<n.items.length){if(null!==n.index){var s=n.$element.find(".profile[data-index="+n.index+"]");s.find('[data-func="select"]').ximagebutton("inactive"),s.find('[data-func="bindapp"]').imagebutton({onClick:null}),s.find('[data-func="import"]').imagebutton({onClick:null}),s.find('[data-func="export"]').imagebutton({onClick:null}),s.find('[data-func="delete"]').imagebutton({onClick:null})}n.index=i,this.find('[data-func="select"]').ximagebutton("active"),n.onBindApp?this.find('[data-func="bindapp"]').imagebutton({onClick:t.proxy(n.bindapp,n)}):this.find('[data-func="bindapp"]').imagebutton({onClick:null}),n.onImport?this.find('[data-func="import"]').imagebutton({onClick:t.proxy(n.import,n)}):this.find('[data-func="import"]').imagebutton({onClick:null}),n.onExport?this.find('[data-func="export"]').imagebutton({onClick:t.proxy(n.export,n)}):this.find('[data-func="export"]').imagebutton({onClick:null}),n.onDelete?this.find('[data-func="delete"]').imagebutton({onClick:t.proxy(n.delete,n)}):this.find('[data-func="delete"]').imagebutton({onClick:null}),n.onSelect&&n.onSelect(n.items[i].guid)}}},i.prototype.rename=function(t){var e=this.data("index");if(null!==e&&this.parent().hasClass("profilelist")){var i=this.parent().data("cmsui.profilelist");e===i.index&&i.onDblClick&&i.onDblClick.call(this.find('[data-func="select"]').find(".ximagebutton-label")[0])}},i.prototype.bindapp=function(t){null!==this.index&&this.index<this.items.length&&this.onBindApp&&this.onBindApp.call(this.$element.find(".profile").eq(this.index).find('[data-func="bindapp"]'))},i.prototype.bindappin=function(t){null!==this.index&&this.index<this.items.length&&this.onBindAppIn&&this.onBindAppIn.call(this.$element.find(".profile").eq(this.index).find('[data-func="bindapp"]')[0])},i.prototype.bindappout=function(t){null!==this.index&&this.index<this.items.length&&this.onBindAppOut&&this.onBindAppOut.call(this.$element.find(".profile").eq(this.index).find('[data-func="bindapp"]')[0])},i.prototype.import=function(t){null!==this.index&&this.index<this.items.length&&this.onImport&&this.onImport()},i.prototype.export=function(t){null!==this.index&&this.index<this.items.length&&this.onExport&&this.onExport()},i.prototype.delete=function(t){null!==this.index&&this.index<this.items.length&&this.onDelete&&this.onDelete()},i.prototype.add=function(t){this.onAdd&&this.onAdd(this.items.length)};var n=t.fn.profilelist;t.fn.profilelist=e,t.fn.profilelist.Constructor=i,t.fn.profilelist.noConflict=function(){return t.fn.profilelist=n,this},t(window).on("load",function(){t(".profilelist").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),1+function(t){"use strict";t.fn.extend({everytime:function(e,i,n,s,o){return this.each(function(){t.timer.add(this,e,i,n,s,o)})},onetime:function(e,i,n){return this.each(function(){t.timer.add(this,e,i,n,1)})},stoptime:function(e,i){return this.each(function(){t.timer.remove(this,e,i)})}}),t.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(void 0==e||null==e)return null;var i=this.regex.exec(t.trim(e.toString()));if(i[2]){var n=parseInt(i[1],10),s=this.powers[i[2]]||1;return n*s}return e},add:function(e,i,n,s,o,a){var r=0;if(t.isFunction(n)&&(o||(o=s),s=n,n=i),i=t.timer.timeParse(i),!("number"!=typeof i||isNaN(i)||i<=0)){o&&o.constructor!=Number&&(a=!!o,o=0),o=o||0,a=a||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),s.$timerID=s.$timerID||this.guid++;var l=function(){a&&this.inProgress||(this.inProgress=!0,(++r>o&&0!==o||s.call(e,r)===!1)&&t.timer.remove(e,n,s),this.inProgress=!1)};l.$timerID=s.$timerID,e.$timers[n][s.$timerID]||(e.$timers[n][s.$timerID]=window.setInterval(l,i)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)}},remove:function(t,e,i){var n,s=t.$timers;if(s){if(e){if(s[e]){if(i)i.$timerID&&(window.clearInterval(s[e][i.$timerID]),delete s[e][i.$timerID]);else for(var i in s[e])window.clearInterval(s[e][i]),delete s[e][i];for(n in s[e])break;n||(n=null,delete s[e])}}else for(e in s)this.remove(t,e,i);for(n in s)break;n||(t.$timers=null)}}}}),t(window).one("unload",function(){var e=t.timer.global;for(var i in e)for(var n=e[i],s=n.length;--s;)t.timer.remove(n[s],i)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("cmsui.skins"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);o||n.data("cmsui.skins",o=new i(this,a)),"object"==typeof e&&(e.hasOwnProperty("active")&&(o.active=e.active),e.hasOwnProperty("items")&&(o.items&&o.$element.empty(),o.items=e.items,t.each(o.items,function(t,e){this.active&&this.active==e?this.$element.append("<div class='skins-item active' data-index='"+t+"'><input class='skins-item-image' type='image' draggable='false' src='"+e+"'></input><check/></div>"):this.$element.append("<div class='skins-item' data-index='"+t+"'><input class='skins-item-image' type='image' draggable='false' src='"+e+"'></input><check/></div>")}.bind(o)),o.$element.on("click.cmsui.skins.data-api",".skins-item",s)),e.hasOwnProperty("onSelect")&&(o.onSelect=e.onSelect))})}var i=function(e,i){this.$element=t(e),this.options=i,this.items=null,this.active=null,this.onSelect=null};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.select=function(t){var e=this.$element,i=t;if(!i.hasClass("active")){var n=e.find(".active:last");n.removeClass("active"),i.addClass("active"),this.onSelect&&this.onSelect(i.data("index"))}};var n=t.fn.skins;t.fn.skins=e,t.fn.skins.Constructor=i,t.fn.skins.noConflict=function(){return t.fn.skins=n,this};var s=function(e){var i=t(this),n=i.closest(".skins");n.hasClass("skins")&&(n.data("cmsui.skins").select&&n.data("cmsui.skins").select(i),e.preventDefault())};t(window).on("load",function(){t(".skins").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.ximagebutton"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.ximagebutton",s=new i(this,o)),"string"==typeof e)switch(e){case"active":s.active=!0;var a=s.$element.find(".ximagebutton-image");if(a){var r=a.attr("src");a.attr("src",r.substring(0,r.length-5)+"5.png")}s.$element.addClass("active");break;case"inactive":s.active=!1;var a=s.$element.find(".ximagebutton-image");if(a){var r=a.attr("src");a.attr("src",r.substring(0,r.length-5)+"1.png")}s.$element.removeClass("active")}if("object"==typeof e&&(e.hasOwnProperty("onDblClick")&&(s.onDblClick=e.onDblClick),e.hasOwnProperty("onClick")))if(s.onClick=e.onClick,s.onClick)if(s.active){var a=s.$element.find(".ximagebutton-image");if(a){var r=a.attr("src");a.attr("src",r.substring(0,r.length-5)+"5.png")}}else{var a=s.$element.find(".ximagebutton-image");if(a){var r=a.attr("src");a.attr("src",r.substring(0,r.length-5)+"1.png")}}else{var a=s.$element.find(".ximagebutton-image");if(a){var r=a.attr("src");a.attr("src",r.substring(0,r.length-5)+"4.png")}}})}var i=function(e,i){this.$element=t(e),this.options=i,this.onClick=null,this.active=!1,this.$element.on("mouseover.cmsui.ximagebutton",t.proxy(this.mouseover,this)).on("mouseout.cmsui.ximagebutton",t.proxy(this.mouseout,this)).on("mousedown.cmsui.ximagebutton",t.proxy(this.mousedown,this)).on("mouseup.cmsui.ximagebutton",t.proxy(this.mouseup,this)).on("click.cmsui.ximagebutton",t.proxy(this.click,this)).on("dblclick.cmsui.ximagebutton",t.proxy(this.dblclick,this))};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.mouseover=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.find(".ximagebutton-image");if(i){var n=i.attr("src");i.attr("src",n.substring(0,n.length-5)+"2.png")}}},i.prototype.mouseout=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.data("image");if(this.active){var n=e.find(".ximagebutton-image");if(n){var i=n.attr("src");n.attr("src",i.substring(0,i.length-5)+"5.png")}}else{var n=e.find(".ximagebutton-image");if(n){var i=n.attr("src");n.attr("src",i.substring(0,i.length-5)+"1.png")}}}},i.prototype.mousedown=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.find(".ximagebutton-image");if(i){var n=i.attr("src");i.attr("src",n.substring(0,n.length-5)+"3.png")}}},i.prototype.mouseup=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.find(".ximagebutton-image");if(i){var n=i.attr("src");i.attr("src",n.substring(0,n.length-5)+"2.png")}}},i.prototype.click=function(t){this.onClick&&this.onClick.apply(this.$element)},i.prototype.dblclick=function(t){this.onDblClick&&this.onDblClick.apply(this.$element)};var n=t.fn.ximagebutton;t.fn.ximagebutton=e,t.fn.ximagebutton.Constructor=i,t.fn.ximagebutton.noConflict=function(){return t.fn.ximagebutton=n,this},t(window).on("load",function(){t(".ximagebutton").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("cmsui.navbar"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);o||n.data("cmsui.navbar",o=new i(this,a)),"number"==typeof e&&o.show(o.$element.find("[data-index="+e+"]")),"object"==typeof e&&(e.hasOwnProperty("items")&&(o.items&&o.$element.empty(),o.items=e.items,t.each(o.items,function(t,e){e.toggle||(e.toggle="tab");var i="<li class='";e.disabe&&(i+="disabe "),e.compact&&(i+="compact "),e.compact&&"number"==typeof e.icon&&(i+="split "),i+="'>","string"==typeof e.icon&&(i+=e.disabe?"<img draggable='false' src='"+e.icon.substring(0,e.icon.length-5)+"4.png' />":"<img draggable='false' src='"+e.icon+"' />"),i+="<a data-toggle='"+e.toggle+"' data-index='"+t+"'>"+e.title+"</a></li>",this.$element.append(i)}.bind(o)),o.$element.on("click.cmsui.navbar.data-api",'[data-toggle="tab"]',s)),e.hasOwnProperty("onSelect")&&(o.onSelect=e.onSelect))})}var i=function(e,i){this.$element=t(e),this.options=i,this.items=null,this.onSelect=null};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.show=function(t){var e=this.$element,i=t,n=e.find(".active:last a");n.parent("li").removeClass("active"),i.parent("li").addClass("active");var s=n.data("index");if("number"==typeof s&&this.items[s].hasOwnProperty("icon"))if("string"==typeof this.items[s].icon){var o=n.parent("li").find("img"),a=o.attr("src");o.attr("src",a.substring(0,a.length-5)+"1.png")}else if("number"==typeof this.items[s].icon){s=this.items[s].icon;var o=e.find("[data-index="+s+"]").parent("li").find("img"),a=o.attr("src");o.attr("src",a.substring(0,a.length-5)+"1.png")}if(s=i.data("index"),"number"==typeof s&&this.items[s].hasOwnProperty("icon"))if("string"==typeof this.items[s].icon){var o=i.parent("li").find("img"),a=o.attr("src");o.attr("src",a.substring(0,a.length-5)+"5.png")}else if("number"==typeof this.items[s].icon){s=this.items[s].icon;var o=e.find("[data-index="+s+"]").parent("li").find("img"),a=o.attr("src");o.attr("src",a.substring(0,a.length-5)+"5.png")}this.onSelect&&this.onSelect(i.data("index"))};var n=t.fn.navbar;t.fn.navbar=e,t.fn.navbar.Constructor=i,t.fn.navbar.noConflict=function(){return t.fn.navbar=n,this};var s=function(e){var i=t(this),n=i.closest("ul");n.hasClass("navbar")&&(i.parent("li").hasClass("active")||i.parent("li").hasClass("disabe")||(n.data("cmsui.navbar").show&&n.data("cmsui.navbar").show(i),e.preventDefault()))};t(window).on("load",function(){t(".navbar").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(t,e){var i=Math.min(t,e),n=Math.max(t,e),s=n;if(0===t||0===e)return s;for(var o=1;o<=n;o++)if(s=i*o,s%n===0)return s}function i(t){for(var i=0,n=0;n<t.length;n++){if(0==t[n])return 0;i=e(i,t[n])}return i}t.maths={lcm:e,lcms:i}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.timeaxis"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("cmsui.timeaxis",s=new i(this,o))})}var i=function(e,i){this.$element=t(e),this.options=i;var n=this.$element.innerWidth()-30;this.options.width&&(n=this.options.width),this.$element.append("<div class='timeaxis-timeline' style='width:"+n+"px'></div>");for(var s=0,o=0;o<=n;s++,o+=this.options.gap){var a;a=s&&s%10==0?"<div class='timeaxis-scalesecond' style='left:"+(o+14)+"px'>                  <div class='timeaxis-scalesecondtext'>"+s/10+"s</div>                 </div>":s&&s%5==0?"<div class='timeaxis-scalecount' style='left:"+(o+14)+"px'>                  <div class='timeaxis-scalecounttext'>"+s+"</div>                 </div>":"<div class='timeaxis-scale' style='left:"+(o+14)+"px'></div>",this.$element.append(a)}};i.VERSION="1.0.0",i.DEFAULTS={gap:5};var n=t.fn.timeaxis;t.fn.timeaxis=e,t.fn.timeaxis.Constructor=i,t.fn.timeaxis.noConflict=function(){return t.fn.timeaxis=n,this},t(window).on("load",function(){t(".timeaxis").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.audioanalyser"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.audioanalyser",s=new i(this,o)),"object"==typeof e&&e.onDisplay&&(s.onDisplay=e.onDisplay),"string"==typeof e)switch(e){case"play":s.play();break;case"stop":s.stop()}})}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var i=function(e,i){this.$element=t(e),this.options=i,this.onDisplay=null,this.timer=null,this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.audioSource=this.audioContext.createMediaElementSource(e),this.audioSource.connect(this.analyser),this.analyser.connect(this.audioContext.destination)};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.play=function(){if(this.onDisplay){if(!this.timer){var t=this;this.timer=setInterval(function(){t.display()},10)}}else this.timer&&(clearInterval(this.timer),this.timer=null);this.$element[0].play()},i.prototype.stop=function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.element.pause()},i.prototype.display=function(){this.onDisplay&&this.onDisplay(this.analyser)};var n=t.fn.audioanalyser;t.fn.audioanalyser=e,t.fn.audioanalyser.Constructor=i,t.fn.audioanalyser.noConflict=function(){return t.fn.audioanalyser=n,this},t(window).on("load",function(){t(".AudioAnalyser").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.setting"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.setting",s=new i(this,o)),"object"==typeof e){if(e.hasOwnProperty("title")&&s.$element.find(".setting-set span").text(e.title),e.hasOwnProperty("softversion")&&s.$element.find(".setting-version span").text(e.softversion),e.hasOwnProperty("devicename")&&s.$element.find(".setting-device-name span").text(e.devicename),e.hasOwnProperty("deviceid")&&s.$element.find(".setting-device-id span").text(e.deviceid),e.hasOwnProperty("lang")){s.$element.find(".setting-language .language-select p").text(e.lang.langdata[e.lang.currentlang]);var a="";t.each(e.lang.langdata,function(t,e){a+='<li data-value="'+t+'">'+e+"</li>"}),s.$element.find(".language-select ul").html(a),s.$element.find('.language-select ul li[data-value="'+e.lang.currentlang+'"]').addClass("selected-check"),s.$element.find(".language-select").bind("click",function(){s.$element.find(".language-select").hasClass("open")?s.$element.find(".language-select").removeClass("open"):s.$element.find(".language-select").addClass("open")}),s.$element.find(".language-select ul li").bind("click",function(){s.$element.find(".language-select p").text(t(this).text()),t(this).siblings().removeClass("selected-check"),t(this).addClass("selected-check"),e.hasOwnProperty("onSelectLang")&&e.onSelectLang(t(this).attr("data-value"))})}else s.$element.find(".setting-language").remove();e.hasOwnProperty("onCloseSetting")&&s.$element.find(".setting-close").bind("click",e.onCloseSetting),e.hasOwnProperty("onSoftUpdate")?s.$element.find(".setting-update").bind("click",e.onSoftUpdate):s.$element.find(".setting-update").remove(),e.hasOwnProperty("onRestoreFactory")?s.$element.find(".setting-restore").bind("click",e.onRestoreFactory):s.$element.find(".setting-restore").remove()}})}var i=function(e,i){this.$element=t(e),this.options=i,this.softversion=null,this.devicename=null,this.deviceid=null,this.lang=null,this.onSoftUpdate=null,this.onRestoreFactory=null,this.onSelectLang=null,this.onCloseSetting=null,this.$element.append('<div class="setting-bottom">        <div class="setting-set">          <img src="res/img/setting_1.png" />          <span>设置</span>        </div>        <div class="setting-close">          <img src="res/img/close_1.png" />        </div>      </div>      <div class="setting-version">软件版本:<span></span></div>      <button type="button" class="btn btn-default setting-btn setting-update">检测软件更新</button>      <div class="setting-device-name">当前设备：<span></span></div>      <div class="setting-device-id">设备ID：<span></span></div>      <button type="button" class="btn btn-default setting-btn setting-restore">恢复出厂默认设置</button>      <div class="setting-language">        <div class="language-select">          <p>当前语言</p>          <ul></ul>        </div>      </div>')};i.VERSION="1.0.0",i.DEFAULTS={};var n=t.fn.setting;t.fn.setting=e,t.fn.setting.Constructor=i,t.fn.setting.noConflict=function(){return t.fn.setting=n,this},t(window).on("load",function(){t(".setting").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.deviceselect"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.deviceselect",s=new i(this,o)),"object"==typeof e){if(e.hasOwnProperty("items")){if(0==e.items.length)s.index=null,s.$element.find(".deviceselect-device").attr("src",""),s.onSelect&&s.onSelect(0);else if(null!=s.index){var a,r=s.items[s.index].deviceID;for(a=0;a<e.items.length&&e.items.deviceID!==r;a++);a==e.items.length?(s.index=0,s.$element.find(".deviceselect-device").attr("src",e.items[0].src),s.onSelect&&s.onSelect(e.items[0].deviceID)):s.index=a}else s.index=0,s.$element.find(".deviceselect-device").attr("src",e.items[0].src),s.onSelect&&s.onSelect(e.items[0].deviceID);s.items=e.items,null===s.index||0===s.index?s.$element.find(".deviceselect-left").css({display:"none"}):s.$element.find(".deviceselect-left").css({display:"inline-block"}),null===s.index||s.index===s.items.length-1?s.$element.find(".deviceselect-right").css({display:"none"}):s.$element.find(".deviceselect-right").css({display:"inline-block"}),null===s.index?s.$element.find(".deviceselect-device").css({display:"none"}):s.$element.find(".deviceselect-device").css({display:"inline-block"})}e.hasOwnProperty("onSelect")&&(s.onSelect=e.onSelect,s.$element.find(".deviceselect-left").length>0&&s.$element.find(".deviceselect-left").on("click.cmsui.deviceselect.left",t.proxy(s.leftSelect,s)),s.$element.find(".deviceselect-right").length>0&&s.$element.find(".deviceselect-right").on("click.cmsui.deviceselect.right",t.proxy(s.rightSelect,s)))}})}var i=function(e,i){this.$element=t(e),this.options=i,this.items=null,this.index=null,this.onSelect=null,this.$element.find(".deviceselect-left").css({display:"none"}),this.$element.find(".deviceselect-right").css({display:"none"}),this.$element.find(".deviceselect-device").css({display:"none"})};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.leftSelect=function(t){this.index>0&&this.index--,0===this.index&&this.$element.find(".deviceselect-left").css({display:"none"}),this.$element.find(".deviceselect-right").is(":hidden")&&this.$element.find(".deviceselect-right").css({display:"inline-block"}),this.$element.find(".deviceselect-device").attr("src",this.items[this.index].src),this.onSelect&&this.onSelect(this.items[this.index].deviceID)},i.prototype.rightSelect=function(t){this.index<this.items.length-1&&this.index++,this.$element.find(".deviceselect-left").is(":hidden")&&this.$element.find(".deviceselect-left").css({display:"inline-block"}),this.index===this.items.length-1&&this.$element.find(".deviceselect-right").css({display:"none"}),this.$element.find(".deviceselect-device").attr("src",this.items[this.index].src),this.onSelect&&this.onSelect(this.items[this.index].deviceID)};var n=t.fn.deviceselect;t.fn.deviceselect=e,t.fn.deviceselect.Constructor=i,t.fn.deviceselect.noConflict=function(){return t.fn.deviceselect=n,this},t(window).on("load",function(){t(".deviceselect").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.imagebutton"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.imagebutton",s=new i(this,o)),"string"==typeof e)switch(e){case"active":s.active=!0;var a=s.$element.attr("src");s.$element.attr("src",a.substring(0,a.length-5)+"5.png");break;case"inactive":s.active=!1;var a=s.$element.attr("src");s.$element.attr("src",a.substring(0,a.length-5)+"1.png")}if("object"==typeof e&&(e.hasOwnProperty("onMouseEnter")&&(s.onMouseEnter=e.onMouseEnter),e.hasOwnProperty("onMouseLeave")&&(s.onMouseLeave=e.onMouseLeave),e.hasOwnProperty("onClick"))){s.onClick=e.onClick;var r=s.$element,a=r.attr("src");s.onClick?s.active?r.attr("src",a.substring(0,a.length-5)+"5.png"):r.attr("src",a.substring(0,a.length-5)+"1.png"):r.attr("src",a.substring(0,a.length-5)+"4.png")}})}var i=function(e,i){this.$element=t(e),this.options=i,this.onClick=null,this.onMouseEnter=null,this.onMouseLeave=null,this.active=!1,this.$element.on("mouseover.cmsui.imagebutton",t.proxy(this.mouseover,this)).on("mouseout.cmsui.imagebutton",t.proxy(this.mouseout,this)).on("mousedown.cmsui.imagebutton",t.proxy(this.mousedown,this)).on("mouseup.cmsui.imagebutton",t.proxy(this.mouseup,this)).on("mouseenter.cmsui.imagebutton",t.proxy(this.mouseenter,this)).on("mouseleave.cmsui.imagebutton",t.proxy(this.mouseleave,this)).on("click.cmsui.imagebutton",t.proxy(this.click,this))};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.mouseover=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.attr("src");e.attr("src",i.substring(0,i.length-5)+"2.png")}},i.prototype.mouseout=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.attr("src");this.active?e.attr("src",i.substring(0,i.length-5)+"5.png"):e.attr("src",i.substring(0,i.length-5)+"1.png")}},i.prototype.mousedown=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.attr("src");e.attr("src",i.substring(0,i.length-5)+"3.png")}},i.prototype.mouseup=function(t){if(this.onClick&&!this.active){var e=this.$element,i=e.attr("src");e.attr("src",i.substring(0,i.length-5)+"2.png")}},i.prototype.mouseenter=function(t){this.onMouseEnter&&this.onMouseEnter.call(this.$element)},i.prototype.mouseleave=function(t){this.onMouseLeave&&this.onMouseLeave.call(this.$element)},i.prototype.click=function(t){this.onClick&&(this.onClick.call(this.$element),t.stopPropagation())};var n=t.fn.imagebutton;t.fn.imagebutton=e,t.fn.imagebutton.Constructor=i,t.fn.imagebutton.noConflict=function(){return t.fn.imagebutton=n,this},t(window).on("load",function(){t(".imagebutton").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";t.fn.updateOldValue=function(){return this.each(function(){var e=t(this),i=(e.is(":checkbox,:radio")?e.prop("checked"):e.val())+"";e.data("oldvalue",i)}),this},t.fn.isValueChanged=function(){var e=!1;return this.each(function(){var i=t(this),n=(i.is(":checkbox,:radio")?i.prop("checked"):i.val())+"";if(n!=i.data("oldvalue")+"")return e=!0,!1}),e}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("cmsui.device"),l=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);s||i.data("cmsui.device",s=new n(this,l)),"number"==typeof e&&s.scale(e),"object"==typeof e&&(e.keymap&&s.setKeyMap(e.keymap),e.display&&s.display(e.display),e.aspectratio&&s.aspectratio(e.aspectratio),e.hasOwnProperty("onMouseEnter")&&(s.onMouseEnter=e.onMouseEnter,e.onMouseEnter&&s.keymap?s.$element.find(".device-keystate").on("mouseenter.cmsui.device",a):s.$element.find(".device-keystate").off("mouseenter.cmsui.device",a)),e.hasOwnProperty("onMouseLeave")&&(s.onMouseLeave=e.onMouseLeave,e.onMouseLeave&&s.keymap?s.$element.find(".device-keystate").on("mouseleave.cmsui.device",r):s.$element.find(".device-keystate").off("mouseleave.cmsui.device",r)),
e.hasOwnProperty("onSingleSelect")&&(s.onSingleSelect=e.onSingleSelect,e.onSingleSelect&&s.keymap?s.$element.find(".device-keystate").on("click.cmsui.device",o):s.$element.find(".device-keystate").off("click.cmsui.device",o)),e.hasOwnProperty("onMultiSelect")&&(s.onMultiSelect=e.onMultiSelect,e.onMultiSelect&&s.keymap?(s.$element.on("mousedown.cmsui.device",t.proxy(s.mousedown,s)).on("mousemove.cmsui.device",t.proxy(s.mousemove,s)).on("mouseup.cmsui.device",t.proxy(s.mouseup,s)),s.$element.find(".device-multiselect").length<1&&s.$element.append("<div class='device-multiselect'></div>")):s.$element.off("mousedown.cmsui.device").off("mousemove.cmsui.device").off("mouseup.cmsui.device")))})}const i=1200;var n=function(e,n){this.$element=t(e),this.options=n,this.keymap=null,this.onSingleSelect=null,this.onMultiSelect=null,this.onMouseLeave=null,this.onMouseEnter=null,this.MSData={},this.MSData.hasMouseDown=!1,this.MSData.hasMouseMove=!1,this.MSData.beginPos={},this.MSData.endPos={},this.options.scale&&this.$element.css({width:i*this.options.scale}),this.options.width&&this.$element.css({width:this.options.width}),this.options.aspectratio&&this.$element.find(".device-panel").css({marginTop:"-"+this.options.aspectratio}),this.options.aspectratio&&this.$element.find(".device-keycap").css({marginTop:"-"+this.options.aspectratio}),this.$element.find(".device-outline").attr("draggable",!1),this.$element.find(".device-panel").attr("draggable",!1),this.$element.find(".device-keycap").attr("draggable",!1)};n.VERSION="1.0.0",n.DEFAULTS={},n.prototype.mousedown=function(t){this.MSData.hasMouseDown=!0,this.MSData.hasMouseMove=!1,this.MSData.beginPos.X=t.pageX-this.$element.offset().left,this.MSData.beginPos.Y=t.pageY-this.$element.offset().top,this.MSData.endPos.X=t.pageX-this.$element.offset().left,this.MSData.endPos.Y=t.pageY-this.$element.offset().top},n.prototype.mousemove=function(t){this.MSData.hasMouseDown&&(this.MSData.hasMouseMove=!0,this.MSData.endPos.X=t.pageX-this.$element.offset().left,this.MSData.endPos.Y=t.pageY-this.$element.offset().top,this.$element.find(".device-multiselect").css({left:Math.min(this.MSData.beginPos.X,this.MSData.endPos.X),top:Math.min(this.MSData.beginPos.Y,this.MSData.endPos.Y),width:Math.abs(this.MSData.beginPos.X-this.MSData.endPos.X),height:Math.abs(this.MSData.beginPos.Y-this.MSData.endPos.Y)}),this.$element.find(".device-multiselect").show())},n.prototype.mouseup=function(t){if(this.MSData.hasMouseDown&&(this.$element.find(".device-multiselect").hide(),this.MSData.hasMouseDown=!1,this.MSData.hasMouseMove)){for(var e=[],i=this.$element.find(".device-keystate"),n=0;n<i.length;n++){var s=i.eq(n);s.position().left<Math.max(this.MSData.beginPos.X,this.MSData.endPos.X)&&s.position().left+s.innerWidth()>Math.min(this.MSData.beginPos.X,this.MSData.endPos.X)&&s.position().top<Math.max(this.MSData.beginPos.Y,this.MSData.endPos.Y)&&s.position().top+s.innerHeight()>Math.min(this.MSData.beginPos.Y,this.MSData.endPos.Y)&&this.keymap[s.data("index")]&&e.push(this.keymap[s.data("index")].LocationCode)}e.length&&this.onMultiSelect&&this.onMultiSelect(e)}},n.prototype.scale=function(t){return this.$element.css({width:i*t}),this},n.prototype.setKeyMap=function(e){this.keymap&&(this.$element.find(".device-keylight").remove(),this.$element.find(".device-keystate").remove()),this.keymap=e;var n=this.$element.innerWidth()/i,s="",o="";return t.each(e,function(t,e){var i="";i+="<div class='device-keylight' style='",i+="left: "+e.Position.Left*n+"px;",i+="top: "+e.Position.Top*n+"px;",i+="width: "+e.Position.Width*n+"px;",i+="height: "+e.Position.Height*n+"px;",i+="' data-locationcode='"+e.LocationCode+"'></div>",s+=i;var a="";a+="<div class='device-keystate' style='",a+="left: "+e.Position.Left*n+"px;",a+="top: "+e.Position.Top*n+"px;",a+="width: "+e.Position.Width*n+"px;",a+="height: "+e.Position.Height*n+"px;",a+="' data-index='"+t+"' data-logicCode='"+e.LogicCode+"'></div>",o+=a}),this.$element.append(s),this.$element.append(o),this},n.prototype.display=function(e){return this.keymap?(1===e.type?(this.$element.find(".device-keylight").css({backgroundImage:"url("+e.default+")"}),e.config&&t.each(e.config,function(t,e){this.$element.find(".device-keylight[data-locationcode="+t+"]").css({backgroundImage:"url("+e+")"})}.bind(this))):(e.default?this.$element.find(".device-keylight").css({backgroundColor:e.default}):this.$element.find(".device-keylight").css({backgroundColor:"#000"}),e.config&&t.each(e.config,function(t,e){this.$element.find(".device-keylight[data-locationcode="+t+"]").css({backgroundColor:e})}.bind(this))),this):this},n.prototype.aspectratio=function(t){return this.$element.find(".device-panel").css({marginTop:"-"+t}),this.$element.find(".device-keycap").css({marginTop:"-"+t}),this};var s=t.fn.device;t.fn.device=e,t.fn.device.Constructor=n,t.fn.device.noConflict=function(){return t.fn.device=s,this};var o=function(e){var i=t(this),n=i.parent();if(n.hasClass("device")){var s=i.data("index"),o=JSON.parse(JSON.stringify(n.data("cmsui.device").keymap[s]));o.Position.Left=i.position().left,o.Position.Top=i.position().top,o.Position.Width=i.innerWidth(),o.Position.Height=i.innerHeight(),n.data("cmsui.device").onSingleSelect&&n.data("cmsui.device").onSingleSelect.call(this,o),e.preventDefault()}},a=function(e){var i=t(this),n=i.parent();if(n.hasClass("device")){var s=i.data("index"),o=JSON.parse(JSON.stringify(n.data("cmsui.device").keymap[s]));o.LogicCode!=-1&&(o.Position.Left=i.position().left,o.Position.Top=i.position().top,o.Position.Width=i.innerWidth(),o.Position.Height=i.innerHeight(),n.data("cmsui.device").onMouseEnter&&n.data("cmsui.device").onMouseEnter.call(this,o),t(this).addClass("button-hover"),e.preventDefault())}},r=function(e){var i=t(this),n=i.parent();if(n.hasClass("device")){var s=i.data("index"),o=JSON.parse(JSON.stringify(n.data("cmsui.device").keymap[s]));o.Position.Left=i.position().left,o.Position.Top=i.position().top,o.Position.Width=i.innerWidth(),o.Position.Height=i.innerHeight(),n.data("cmsui.device").onMouseLeave&&n.data("cmsui.device").onMouseLeave.call(this,o),t(this).removeClass("button-hover"),e.preventDefault()}};t(window).on("load",function(){t(".device").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.update"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.update",s=new i(this,o)),"object"==typeof e){if(e.hasOwnProperty("title")&&s.$element.find(".update-title").text(e.title),e.hasOwnProperty("progress")){var a=s.$element.find(".update-progressbar").width();s.$element.find(".update-progress").css("width",e.progress*a+"px"),s.$element.find(".update-status").text("正常 "+(100*e.progress).toFixed(2)+"%")}e.hasOwnProperty("speed")&&s.$element.find(".update-speed").text("速度 "+(e.speed/1024).toFixed(2)+"KB/s"),e.hasOwnProperty("error")&&(s.$element.find(".update-status").addClass("error"),s.$element.find(".update-status").text(e.error),s.$element.find(".update-speed").text("速度 0KB/s"),s.$element.find(".update-confirm").show()),e.hasOwnProperty("onConfirm")&&(s.onConfirm=e.onConfirm)}})}var i=function(e,i){this.$element=t(e),this.options=i,this.onConfirm=null,this.$element.append('      <div class="update-title"></div>      <div class="update-progressbar">        <div class="update-progress"></div>      </div>      <div class="update-status"></div>      <div class="update-speed"></div>      <div class="update-confirm">        <button class="btn btn-default update-confirm-btn">确定</button>      </div>    '),this.$element.find(".update-confirm-btn").on("click",t.proxy(this.confirm,this))};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.confirm=function(){this.onConfirm&&this.onConfirm()};var n=t.fn.update;t.fn.update=e,t.fn.update.Constructor=i,t.fn.update.noConflict=function(){return t.fn.update=n,this},t(window).on("load",function(){t(".update").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("cmsui.leeditor"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);if(s||n.data("cmsui.leeditor",s=new i(this,o)),"object"==typeof e){if(e.hasOwnProperty("icons")){s.icons=e.icons;var a=s.$element.find(".leeditor-buttons");a.empty(),s.icons.hasOwnProperty("add")&&s.icons.add&&(a.append('<input class="imagebutton leeditor-button" data-func="add" type="image" draggable="false" src="'+s.icons.add+'"></input>'),a.find('[data-func="add"]').imagebutton({onClick:t.proxy(s.add,s)})),s.icons.hasOwnProperty("copy")&&s.icons.copy&&(a.append('<input class="imagebutton leeditor-button" data-func="copy" type="image" draggable="false" src="'+s.icons.copy+'"></input>'),a.find('[data-func="copy"]').imagebutton({onClick:t.proxy(s.copy,s)})),s.icons.hasOwnProperty("del")&&s.icons.del&&(a.append('<input class="imagebutton leeditor-button" data-func="del" type="image" draggable="false" src="'+s.icons.del+'"></input>'),a.find('[data-func="del"]').imagebutton({onClick:t.proxy(s.del,s)})),s.icons.hasOwnProperty("moveup")&&s.icons.moveup&&(a.append('<input class="imagebutton leeditor-button" data-func="moveup" type="image" draggable="false" src="'+s.icons.moveup+'"></input>'),a.find('[data-func="moveup"]').imagebutton({onClick:t.proxy(s.moveup,s)})),s.icons.hasOwnProperty("movedown")&&s.icons.movedown&&(a.append('<input class="imagebutton leeditor-button" data-func="movedown" type="image" draggable="false" src="'+s.icons.movedown+'"></input>'),a.find('[data-func="movedown"]').imagebutton({onClick:t.proxy(s.movedown,s)})),s.icons.hasOwnProperty("preview")&&s.icons.preview&&(a.append('              <div class="ximagebutton leeditor-button" data-func="preview">                <input class="ximagebutton-image" type="image" draggable="false" src="'+s.icons.preview+'"></input>                <label class="ximagebutton-label-float">播放预览</label>              </div>            '),a.find('[data-func="preview"]').ximagebutton({onClick:t.proxy(s.preview,s)})),s.icons.hasOwnProperty("save")&&s.icons.save&&(a.append('              <div class="ximagebutton leeditor-button" data-func="save">                <input class="ximagebutton-image" type="image" draggable="false" src="'+s.icons.save+'"></input>                <label class="ximagebutton-label-float">保存</label>              </div>            '),a.find('[data-func="save"]').ximagebutton({onClick:t.proxy(s.save,s)})),s.icons.hasOwnProperty("cancel")&&s.icons.cancel&&(a.append('              <div class="ximagebutton leeditor-button" data-func="cancel">                <input class="ximagebutton-image" type="image" draggable="false" src="'+s.icons.cancel+'"></input>                <label class="ximagebutton-label-float">取消</label>              </div>            '),a.find('[data-func="cancel"]').ximagebutton({onClick:t.proxy(s.cancel,s)}))}e.hasOwnProperty("onPreview")&&(s.onPreview=e.onPreview),e.hasOwnProperty("onSave")&&(s.onSave=e.onSave),e.hasOwnProperty("onCancel")&&(s.onCancel=e.onCancel),e.hasOwnProperty("onSelect")&&(s.onSelect=e.onSelect),e.hasOwnProperty("le")&&s.loadle(e.le),e.hasOwnProperty("edit")&&(e.edit&&s.le.hasOwnProperty("Canvases")?(s.isEdit=!0,s.$element.find(".leeditor-disable").hide()):(s.isEdit=!1,s.$element.find(".leeditor-disable").show())),e.hasOwnProperty("lechanged")&&s.refreshduration()}})}var i=function(e,i){this.$element=t(e),this.options=i,this.icons=null,this.onPreview=null,this.onSave=null,this.onCancel=null,this.onSelect=null,this.le=null,this.canvases=[],this.transaction=null,this.svg=null,this.itemsgroup=null,this.currentCanvas=null,this.isEdit=!1,this.isPreview=!1;var n=this.$element.innerWidth();this.$element.append("      <div class='leeditor-buttons'></div>      <div class='leeditor-workSpace'>        <div class='leeditor-items' style='width: 360px; height: 165px; left: 0px; padding-left: 10px;'>          <table class='leeditor-tablehead' cellspacing='0' cellpadding='0' style='width: 0px'>            <thead>              <tr style='height:40px'>                <th class='leeditor-colheader' style='width: 160px'>名称</th>                <th class='leeditor-colheader' style='width: 40px'>起始</th>                <th class='leeditor-colheader' style='width: 40px'>结束</th>                <th class='leeditor-colheader' style='width: 40px'>时长</th>                <th class='leeditor-colheader' style='width: 80px'>播放时间</th>              </tr>            </thead>          </table>          <table class='leeditor-table' cellspacing='0' cellpadding='0' style='width: 0px'>            <thead>              <tr style='height:40px'>                <th class='leeditor-colheader' style='width: 160px'>名称</th>                <th class='leeditor-colheader' style='width: 40px'>起始</th>                <th class='leeditor-colheader' style='width: 40px'>结束</th>                <th class='leeditor-colheader' style='width: 40px'>时长</th>                <th class='leeditor-colheader' style='width: 80px'>播放时间</th>              </tr>            </thead>          </table>        </div>        <div class='leeditor-timeaxis' style='width: "+(n-360)+"px; left: 360px;'>          <div class='timeaxis' style='height:40px'></div>          <div class='leeditor-svgbox' style='position: relative; width: 100%; height: 125px;'>          </div>        </div>      </div>      <div class='leeditor-disable'>      </div>    ");var s=this;this.$element.find(".leeditor-svgbox").scroll(function(e){var i=t(this),n=i.scrollTop();s.$element.find(".leeditor-items").scrollTop(n),s.$element.find(".leeditor-tablehead").css("top",n)}),this.$element.find(".timeaxis").timeaxis(),this.$element.find(".leeditor-svgbox").svg({settings:{class:"leeditor-svg"},onLoad:function(t){s.svg=t,s.itemsgroup=t.group("itemsgroup")}})};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.reset=function(){this.isEdit=!1,this.$element.find(".leeditor-disable").show(),this.isPreview=!1,this.$element.find(".leeditor-buttons").find('[data-func="preview"]').length&&this.$element.find(".leeditor-buttons").find('[data-func="preview"]').find("label").text("播放预览"),this.$element.find("[itemid]").remove()},i.prototype.loadle=function(t){this.begintransaction(),this.le=t,this.canvases=[],this.reset(),t.hasOwnProperty("Canvases")&&this.loaditems(),this.endtransaction()},i.prototype.getitem=function(t){for(var e=0;e<this.canvases.length;e++)if(this.canvases[e].guid==t)return this.canvases[e];return null},i.prototype.lechanged=function(){var t=this;this.$element.stoptime("leeditor-itemischanged"),this.$element.onetime(50,"leeditor-itemischanged",function(){t.refreshitems(),t.refreshsvgbox(),t.$element.trigger("leeditor.refreshcompleted")})},i.prototype.loaditems=function(){for(var e=1;e<=this.le.Canvases.length;e++)this.addcanves({guid:t.utilities.guid(),data:this.le.Canvases[this.le.Canvases.length-e]})},i.prototype.datachanged=function(t){var e=t.closest("tr").attr("itemid"),i=this.getitem(e),n=t.prop("name");if(t.isValueChanged()){if(this.begintransaction(),"name"==n)i.data.Name=t.val();else if("start"==n){var s=parseFloat(t.val());s=parseInt(10*s),s>0&&(i.data.Start=s)}else if("end"==n){var o=parseFloat(t.val());o=parseInt(10*o),o>i.data.Start&&(i.data.Length=o-i.data.Start)}else if("length"==n){var a=parseFloat(t.val());a=parseInt(10*a),a>0&&(i.data.Length=a)}this.endtransaction()}},i.prototype.addcanves=function(e,i){var n=t.le("duration",e.data),s="";null!==n&&(s=n/10+"s");var o=t("      <tr itemid='"+e.guid+"' class='leeditor-row'>       <td class='leeditor-cell'>        <input type='text' name='name' value='"+e.data.Name+"' placeholder='name' />       </td>       <td class='leeditor-cell'>        <input type='text' name='start' value='"+e.data.Start/10+"s' placeholder='0' />       </td>       <td class='leeditor-cell'>        <input type='text' name='end' value='"+(e.data.Start+e.data.Length)/10+"s' placeholder='"+(e.data.Start/10+1)+"' />       </td>       <td class='leeditor-cell'>        <span name='duration'>"+s+"</span>       </td>       <td class='leeditor-cell'>        <input type='text' name='length' value='"+e.data.Length/10+"s' placeholder='1' />       </td>      </tr>    "),a=this;if(o.click(function(e){a.select(t(this).attr("itemid"))}),o.find("input").focus(function(){t(this).updateOldValue()}).blur(function(e){a.datachanged(t(this))}).keydown(function(e){13==e.keyCode&&a.datachanged(t(this))}),e.$rowelement=o,"number"!=typeof i)this.canvases.push(e),this.$element.find(".leeditor-table").append(o);else{this.canvases.splice(i,0,e);var r=this.$element.find(".leeditor-table").find("tr.leeditor-row").eq(i);r.length>0?r.before(o):this.$element.find(".leeditor-table").append(o)}},i.prototype.getitem=function(t){for(var e=null,i=0;i<this.canvases.length;i++)if(this.canvases[i].guid==t){e=this.canvases[i];break}return e},i.prototype.getrow=function(t){var e=-1;return 0!=this.canvases.length&&(e=this.canvases.indexOf(t)),e},i.prototype.refreshitems=function(){for(var t=0;t<this.canvases.length;t++){var e=this.canvases[t],i=e.$rowelement;i.find("[name=name]").val(e.data.Name),i.find("[name=start]").val(e.data.Start/10+"s"),i.find("[name=end]").val((e.data.Start+e.data.Length)/10+"s"),i.find("[name=length]").val(e.data.Length/10+"s")}},i.prototype.drawitem=function(e){var i=this,n=e.$rowelement,s=5*e.data.Start+15,o=n.position().top+n.offsetParent().scrollTop()-40+5,a=5*e.data.Length,r=this.svg.svg(this.itemsgroup,s,o,a,20,{class:"leeditor-itemsvgbox",itemid:e.guid});e.$svgelement=t(r),this.svg.rect(r,0,0,"100%","100%",{class:"leeditor-itemsvglayout",rx:"2",ry:"2"}),t(r).bind("mousedown.cmsui.leeditor.svg",function(e){var n=t(this),s=parseFloat(n.closest(".leeditor-svg").offset().left)+parseFloat(n.attr("x")),o=s+parseFloat(n.attr("width")),a=e.pageX;if(n.attr("oldx",n.attr("x")),n.attr("oldwidth",n.attr("width")),o-s>30&&a<=o&&a>=o-10){var r=o-a;n.bind("mousemove.cmsui.leeditor.svg",function(t){var e=t.pageX-s+r;n.attr("width",e<10?10:e)})}else if(o-s>30&&a>=s&&a<=s+10){var r=parseFloat(n.attr("x"));n.bind("mousemove.cmsui.leeditor.svg",function(t){var e=r-(a-t.pageX),i=o-s+(a-t.pageX);n.attr("x",e),n.attr("width",i<10?10:i)})}else{var r=parseFloat(n.attr("x"))-e.pageX;n.bind("mousemove.cmsui.leeditor.svg",function(t){var e=r+t.pageX;n.attr("x",e)})}t("body").one("mouseup.cmsui.leeditor.svg",function(t){if(n&&(n.unbind("mousemove.cmsui.leeditor.svg").unbind("mouseup.cmsui.leeditor.svg").unbind("mouseleave.cmsui.leeditor.svg"),n.attr("oldx")!=n.attr("x")||n.attr("oldwidth")!=n.attr("width"))){var e=i.getitem(n.attr("itemid"));i.begintransaction(),e.data.Start=Math.round((n.attr("x")-15)/5),e.data.Start<0&&(e.data.Start=0),e.data.Length=Math.round(n.attr("width")/5),i.endtransaction()}})}).bind("mousemove.cmsui.leeditor.svg",function(e){var i=t(this),n=parseFloat(i.closest(".leeditor-svg").offset().left)+parseFloat(i.attr("x")),s=n+parseFloat(i.attr("width")),o=e.pageX;s-n>30&&(o<=s&&o>=s-10||o>=n&&o<=n+10)?i.addClass("svghand"):i.removeClass("svghand")})},i.prototype.refreshsvgbox=function(){this.itemsgroup&&this.itemsgroup.remove(),this.itemsgroup=this.svg.group("itemsgroup");for(var t=0;t<this.canvases.length;t++)this.drawitem(this.canvases[t]);this.$element.find(".leeditor-svg").height(30*this.canvases.length)},i.prototype.begintransaction=function(){return this.transaction?console.error("Cannot open twice a transaction"):this.transaction={snapshot:JSON.stringify(this.le),errors:[]},this.transaction},i.prototype.endtransaction=function(){if(!this.transaction)return console.error("Transaction never started."),!0;var t=!0;return this.transaction.errors.length<=0&&this.lechanged(),this.transaction=null,t},i.prototype.select=function(t){var e=this.getitem(t);e&&(e.$rowelement.closest("table").find(".selected").removeClass("selected"),e.$rowelement.addClass("selected"),this.currentCanvas=e,this.onSelect&&this.onSelect(e.data))},i.prototype.add=function(e){if(null!==this.le&&this.le.hasOwnProperty("Canvases")&&null!==this.currentCanvas){var i=this.getrow(this.currentCanvas)+1;if(i>0){var n={Name:"新画布",Start:0,Length:10,Frames:[],LEConfigs:[]};this.begintransaction();var s=-1;s=this.le.Canvases.indexOf(this.currentCanvas.data),s>=0&&(this.le.Canvases.splice(s,0,n),this.addcanves({guid:t.utilities.guid(),data:n},i)),this.endtransaction()}}},i.prototype.copy=function(e){if(null!==this.le&&this.le.hasOwnProperty("Canvases")&&null!==this.currentCanvas){var i=this.getrow(this.currentCanvas)+1;if(i>0){var n=JSON.parse(JSON.stringify(this.currentCanvas.data));this.begintransaction();var s=-1;s=this.le.Canvases.indexOf(this.currentCanvas.data),s>=0&&(this.le.Canvases.splice(s,0,n),this.addcanves({guid:t.utilities.guid(),data:n},i)),this.endtransaction()}}},i.prototype.del=function(t){if(null!==this.le&&this.le.hasOwnProperty("Canvases")&&null!==this.currentCanvas){var e=this.getrow(this.currentCanvas);if(e>=0){this.begintransaction(),this.currentCanvas.$rowelement&&this.currentCanvas.$rowelement.remove(),this.currentCanvas.$svgelement&&this.currentCanvas.$svgelement.remove();var i=-1;i=this.le.Canvases.indexOf(this.currentCanvas.data),i>=0&&this.le.Canvases.splice(i,1),this.canvases.splice(e,1),this.currentCanvas=null,e=e>this.canvases.length-1?this.canvases.length-1:e,e>=0&&(this.canvases[e].$rowelement.click(),this.canvases[e].$rowelement.find("[name=name]").focus()),this.endtransaction()}}},i.prototype.moveup=function(t){if(null!==this.le&&this.le.hasOwnProperty("Canvases")&&null!==this.currentCanvas){var e=this.getrow(this.currentCanvas);if(!(e<=0)){this.begintransaction();var i=this.$element.find(".leeditor-table").find("tr[itemid]"),n=i.slice(e,e+1);i.eq(e-1).before(n);var s=-1;if(s=this.le.Canvases.indexOf(this.currentCanvas.data),s>=0&&s<this.le.Canvases.length-1){var o=this.le.Canvases.splice(s,1),a=this.le.Canvases.splice(0,s+1);this.le.Canvases=[].concat(a,o,this.le.Canvases)}var o=this.canvases.splice(e,1),a=this.canvases.splice(0,e-1);this.canvases=[].concat(a,o,this.canvases),this.endtransaction()}}},i.prototype.movedown=function(t){if(null!==this.le&&this.le.hasOwnProperty("Canvases")&&null!==this.currentCanvas){var e=this.getrow(this.currentCanvas);if(!(e<0||e>=this.canvases.length-1)){this.begintransaction();var i=this.$element.find(".leeditor-table").find("tr[itemid]"),n=i.eq(e+1),s=i.slice(e,e+1);n.after(s);var o=-1;if(o=this.le.Canvases.indexOf(this.currentCanvas.data),o>0&&o<=this.le.Canvases.length-1){var a=this.le.Canvases.splice(o,1),r=this.le.Canvases.splice(0,o-1);this.le.Canvases=[].concat(r,a,this.le.Canvases)}var a=this.canvases.splice(e,1),r=this.canvases.splice(0,e+1);this.canvases=[].concat(r,a,this.canvases),this.endtransaction()}}},i.prototype.preview=function(t){this.isPreview=!this.isPreview,this.isPreview?this.$element.find(".leeditor-buttons").find('[data-func="preview"]').find("label").text("暂停播放"):this.$element.find(".leeditor-buttons").find('[data-func="preview"]').find("label").text("播放预览"),this.onPreview&&this.onPreview(this.le,this.isPreview)},i.prototype.save=function(t){this.onSave&&this.onSave(this.le)},i.prototype.cancel=function(t){this.isEdit=!1,this.$element.find(".leeditor-disable").show(),this.onCancel&&this.onCancel(this.le)},i.prototype.refreshduration=function(){if(null!==this.le&&this.le.hasOwnProperty("Canvases")&&null!==this.currentCanvas){var e=this.getrow(this.currentCanvas);if(!(e<0||e>this.canvases.length-1)){var i=this.$element.find(".leeditor-table").find("tr[itemid]"),n=i.eq(e),s=t.le("duration",this.currentCanvas.data),o="";null!==s&&(o=s/10+"s"),n.find("[name=duration]").text(o)}}};var n=t.fn.leeditor;t.fn.leeditor=e,t.fn.leeditor.Constructor=i,t.fn.leeditor.noConflict=function(){return t.fn.leeditor=n,this},t(window).on("load",function(){t(".leeditor").each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),1+function(t){"use strict";function e(e){var n=t.extend({},i.DEFAULTS,"object"==typeof e&&e),s="cmsui.le";"object"==typeof e&&e.name&&(s+="."+e.name);var o=t("body").data(s);if(o||t("body").data(s,o=new i(n)),"object"==typeof e&&e.onDisplay&&(o.onDisplay=e.onDisplay),"string"==typeof e)switch(e){case"params":if(2==arguments.length&&"object"==typeof arguments[1])return o.params(arguments[1]);break;case"init":if(2==arguments.length&&"object"==typeof arguments[1])return o.init(arguments[1],null,null);if(3==arguments.length){if("object"==typeof arguments[1]&&"function"==typeof arguments[2])return o.init(arguments[1],null,arguments[2]);if("object"==typeof arguments[1]&&"object"==typeof arguments[2])return o.init(arguments[1],arguments[2],null)}if(4==arguments.length&&"object"==typeof arguments[1]&&"object"==typeof arguments[2]&&"function"==typeof arguments[3])return o.init(arguments[1],arguments[2],arguments[3]);break;case"play":var a=null;return 2==arguments.length&&"object"==typeof arguments[1]&&(a=o.init(arguments[1],null,null)),3==arguments.length&&("object"==typeof arguments[1]&&"function"==typeof arguments[2]?a=o.init(arguments[1],null,arguments[2]):"object"==typeof arguments[1]&&"object"==typeof arguments[2]&&(a=o.init(arguments[1],arguments[2],null))),4==arguments.length&&"object"==typeof arguments[1]&&"object"==typeof arguments[2]&&"function"==typeof arguments[3]&&(a=o.init(arguments[1],arguments[2],arguments[3])),o.play(),a;case"stop":return o.stop();case"duration":return 2==arguments.length&&"object"==typeof arguments[1]?o.duration(arguments[1]):null}}var i=function(t){this.options=t,this.onDisplay=null,this.data={valid:!1,canvases:[],params:[]},this.timer=null};i.VERSION="1.0.0",i.DEFAULTS={},i.prototype.canvasdata=function(e,i){var n={valid:!1,start:0,length:0,frames:[],les:[],count:0,frameIndex:0,frameCount:0,display:null,params:{LEConfigs:[]}};if(!e)return n;if(e.hasOwnProperty("Start")&&(n.start=e.Start),e.hasOwnProperty("Length")&&(n.length=e.Length),!e.hasOwnProperty("Frames"))return console.log("无效灯效文件, 无Frames数据"),n;if("[object Array]"!==Object.prototype.toString.call(e.Frames))return console.log("无效灯效文件，Frames不是数组"),n;if(e.hasOwnProperty("LEConfigs")&&"[object Array]"!==Object.prototype.toString.call(e.LEConfigs))return console.log("无效灯效文件，LEConfigs不是数组"),n;for(var s=0;s<e.Frames.length;s++){if(!e.Frames[s].hasOwnProperty("Count")||!e.Frames[s].hasOwnProperty("Data"))return console.log("无效Frames["+s+"]数据"),console.log(e.Frames[s]),n;var o={count:e.Frames[s].Count,color:e.Frames[s].Color,data:{}};for(var a in e.Frames[s].Data){var r=t.colors.toJS(e.Frames[s].Data[a]);r&&(o.data[a]=r)}n.frames.push(o)}if(0==n.frames.length&&console.log("无效灯效文件，Frames是空数组"),e.hasOwnProperty("LEConfigs"))for(var s=0;s<e.LEConfigs.length;s++){if(!e.LEConfigs[s].hasOwnProperty("Type")||!e.LEConfigs[s].hasOwnProperty("Count")||!e.LEConfigs[s].hasOwnProperty("Color")||"[object Array]"!==Object.prototype.toString.call(e.LEConfigs[s].Keys))return console.log("无效LEConfigs["+s+"]数据"),console.log(e.LEConfigs[s]),n;var l={type:e.LEConfigs[s].Type,count:e.LEConfigs[s].Count,color:t.colors.toJS(e.LEConfigs[s].Color),hsl:t.colors.toHSL(e.LEConfigs[s].Color),rgb:t.colors.toRGB(e.LEConfigs[s].Color),keys:e.LEConfigs[s].Keys},c={Name:"颜色参数"+s,Color:e.LEConfigs[s].Color,Index:s};switch(e.LEConfigs[s].Type){case 0:c.Name+="：单色",c.Key="le_param_onecolor";break;case 1:c.Name+="：RGB变换",c.Key="le_param_rgb";break;case 2:c.Name+="：呼吸",c.Key="le_param_breath"}if(i&&i.hasOwnProperty("LEConfigs")&&i.LEConfigs[s]&&i.LEConfigs[s].hasOwnProperty("Color")&&(c.Color=i.LEConfigs[s].Color,l.color=t.colors.toJS(i.LEConfigs[s].Color),l.hsl=t.colors.toHSL(i.LEConfigs[s].Color),l.rgb=t.colors.toRGB(i.LEConfigs[s].Color)),n.params.LEConfigs[s]=c,2===e.LEConfigs[s].Type){if(!e.LEConfigs[s].hasOwnProperty("StayCount"))return console.log("无效LEConfigs["+s+"]数据"),console.log(e.LEConfigs[s]),n;l.stay=e.LEConfigs[s].StayCount,l.lightnessMax=0,l.hsl&&(l.lightnessMax=l.hsl.l),l.state=0,l.frameCount=0}else if(3===e.LEConfigs[s].Type&&l.rgb){var h=l.rgb.r+l.rgb.g+l.rgb.b;h>0&&h<=255?l.rgbMax=3*h:h>255&&h<510?l.rgbMax=1275-2*h:h>=510&&h<765?l.rgbMax=3*(765-h):l.rgbMax=0,l.rgb.r<255?l.addColor="R":l.rgb.g<255?l.addColor="G":l.rgb.b<255&&(l.addColor="B"),l.rgb.r>0?l.subColor="R":l.rgb.g>0?l.subColor="G":l.rgb.r>0&&(l.subColor="B")}n.les.push(l)}return n.valid=!0,n},i.prototype.ledata=function(t,e){var i={valid:!1,canvases:[],params:[]};if(!t)return i;if(t.hasOwnProperty("Canvases")){if("[object Array]"!==Object.prototype.toString.call(t.Canvases))return console.log("无效灯效文件，Canvases不是数组"),i;for(var n=0;n<t.Canvases.length;n++){var s=null;"[object Array]"===Object.prototype.toString.call(e)&&(s=e[n]);var o=this.canvasdata(t.Canvases[n],s);if(!o.valid)return i;i.canvases.push(o),i.params.push(o.params)}}else{var o=this.canvasdata(t,e);if(!o.valid)return i;i.canvases.push(o),i.params.push(o.params)}return i.valid=!0,i},i.prototype.params=function(t){var e=this.ledata(t,null);return e.valid?t.hasOwnProperty("Canvases")?e.params:e.params[0]:null},i.prototype.init=function(t,e,i){var n=this.ledata(t,e);return n.valid?(this.data=n,i&&(this.onDisplay=i),t.hasOwnProperty("Canvases")?this.data.params:this.data.params[0]):null},i.prototype.play=function(){if(!this.onDisplay)return null;if(!this.data.valid)return null;if(1==this.data.canvases.length&&0==this.data.canvases[0].start&&1==this.data.canvases[0].frames.length&&0==this.data.canvases[0].les.length){this.timer&&(clearInterval(this.timer),this.timer=null);var t=this.decode();this.display(t)}else if(!this.timer){var e=this;this.timer=setInterval(function(){var t=e.decode();e.display(t)},100)}},i.prototype.stop=function(){this.timer&&(clearInterval(this.timer),this.timer=null);var t={default:"#000"};return this.display(t),!0},i.prototype.display=function(t){this.onDisplay&&JSON.stringify(t)!=JSON.stringify(this.data.display)&&(this.data.display=JSON.parse(JSON.stringify(t)),this.onDisplay(t))},i.prototype.rgb=function(t){if(t.rgb&&t.addColor&&t.subColor){switch(t.addColor==t.subColor&&("R"==t.addColor?t.addColor="G":"G"==t.addColor?t.addColor="B":"B"==t.addColor&&(t.addColor="R")),"R"==t.addColor&&255==t.rgb.r&&(t.addColor="G"),"G"==t.addColor&&255==t.rgb.g&&(t.addColor="B"),"B"==t.addColor&&255==t.rgb.b&&(t.addColor="R"),t.addColor==t.subColor&&("R"==t.subColor?t.subColor="G":"G"==t.subColor?t.subColor="B":"B"==t.subColor&&(t.subColor="R")),"R"==t.subColor&&0==t.rgb.r&&(t.subColor="G"),"G"==t.subColor&&0==t.rgb.g&&(t.subColor="B"),"B"==t.subColor&&0==t.rgb.b&&(t.subColor="R"),t.addColor){case"R":t.rgb.r++,255==t.rgb.r&&(t.addColor="G");break;case"G":t.rgb.g++,255==t.rgb.g&&(t.addColor="B");break;case"B":t.rgb.b++,255==t.rgb.b&&(t.addColor="R")}switch(t.subColor){case"R":t.rgb.r--,0==t.rgb.r&&(t.subColor="G");break;case"G":t.rgb.g--,0==t.rgb.g&&(t.subColor="B");break;case"B":t.rgb.b--,0==t.rgb.b&&(t.subColor="R")}"R"==t.addColor&&255==t.rgb.r&&(t.addColor="G"),"G"==t.addColor&&255==t.rgb.g&&(t.addColor="B"),"B"==t.addColor&&255==t.rgb.b&&(t.addColor="R"),"R"==t.subColor&&0==t.rgb.r&&(t.subColor="G"),"G"==t.subColor&&0==t.rgb.g&&(t.subColor="B"),"B"==t.subColor&&0==t.rgb.b&&(t.subColor="R")}},i.prototype.decode=function(){if(!this.data.valid)return null;for(var e={},i=this.data.canvases,n=0;n<i.length;n++)if(i[n].count<i[n].start)i[n].count++;else{if(i[n].length){if(i[n].count>=i[n].start+i[n].length)continue;i[n].count++}for(var s=i[n].frames[i[n].frameIndex],o=s.data,a=i[n].les,r=0;r<a.length;r++)if(a[r].color){for(var l=0;l<a[r].keys.length;l++)o.hasOwnProperty(a[r].keys[l])&&(o[a[r].keys[l]]=a[r].color);switch(a[r].type){case 1:a[r].hsl&&(a[r].hsl.h=(a[r].hsl.h+360/a[r].count)%360,a[r].color=t.colors.fromRGB(t.colors.fromHSL(a[r].hsl)));break;case 2:switch(a[r].state){case 0:a[r].frameCount++,a[r].hsl&&(a[r].hsl.l=a[r].lightnessMax*(a[r].count-a[r].frameCount)/a[r].count,a[r].color=t.colors.fromRGB(t.colors.fromHSL(a[r].hsl))),a[r].frameCount>=a[r].count&&(a[r].state++,a[r].frameCount=0);break;case 1:a[r].frameCount++,a[r].frameCount>=a[r].stay&&(a[r].state++,a[r].frameCount=0);break;case 2:a[r].frameCount++,
a[r].hsl&&(a[r].hsl.l=a[r].lightnessMax*a[r].frameCount/a[r].count,a[r].color=t.colors.fromRGB(t.colors.fromHSL(a[r].hsl))),a[r].frameCount>=a[r].count&&(a[r].state++,a[r].frameCount=0);break;case 3:a[r].frameCount++,a[r].frameCount>=a[r].stay&&(a[r].state=0,a[r].frameCount=0)}break;case 3:if(a[r].rgb&&leData.rgbMax&&a[r].addColor&&a[r].subColor){for(var l=leData.rgbMax/a[r].count;l>0;l--)this.rgb(a[r]);a[r].color=t.colors.fromRGB(a[r].rgb)}}}else console.log("无效灯效颜色数据");i[n].frameCount++,i[n].frameCount>=s.count&&(i[n].frameCount=0,i[n].frameIndex++,i[n].frameIndex>=i[n].frames.length&&(i[n].frameIndex=0));var c;for(c in o)e[c]=o[c]}for(var h=!0,n=0;n<i.length;n++){if(0===i[n].length){h=!1;break}if(i[n].count<i[n].start+i[n].length){h=!1;break}}if(h)for(var n=0;n<i.length;n++){i[n].count=0,i[n].frameIndex=0,i[n].frameCount=0;for(var a=i[n].les,r=0;r<a.length;r++)switch(a[r].type){case 1:a[r].color=t.colors.toJS(i[n].params.LEConfigs[r].Color),a[r].hsl=t.colors.toHSL(i[n].params.LEConfigs[r].Color);break;case 2:a[r].color=t.colors.toJS(i[n].params.LEConfigs[r].Color),a[r].hsl=t.colors.toHSL(i[n].params.LEConfigs[r].Color),a[r].state=0,a[r].frameCount=0}}var d={config:e};return d},i.prototype.duration=function(e){if(e.hasOwnProperty("Canvases"))return null;var i=this.ledata(e,null);if(!i.valid)return null;if(1!==i.canvases.length)return null;for(var n=[],s=0,o=0;o<i.canvases[0].frames.length;o++)s+=i.canvases[0].frames[o].count;n.push(s);for(var a=0;a<i.canvases[0].frames.length;a++)s+=i.canvases[0].frames[a].count;for(var r=0;r<i.canvases[0].les.length;r++)switch(i.canvases[0].les[r].type){case 1:n.push(i.canvases[0].les[r].count);break;case 2:n.push(2*(i.canvases[0].les[r].count+i.canvases[0].les[r].stay))}return t.maths.lcms(n)},t.le=e}(jQuery);